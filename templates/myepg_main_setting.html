{% extends "base.html" %}
{% block content %}

{{ macros.m_button_group([['globalSettingSaveBtn', 'ì„¤ì • ì €ì¥'], ['globalOneExecuteBtn', '1íšŒ ì‹¤í–‰'], ['globalImmediatelyExecuteBtn', 'ì¦‰ì‹œ ì‹¤í–‰']])}}
{{ macros.m_row_start('5') }}
{{ macros.m_row_end() }}

<nav>
  {{ macros.m_tab_head_start() }}
    {{ macros.m_tab_head('normal', 'ì„¤ì •', true) }}
    {{ macros.m_tab_head('auto', 'ìë™', false) }}
  {{ macros.m_tab_head_end() }}
</nav>
<form id='setting' name='setting'>
<div class="tab-content" id="nav-tabContent">
    {{ macros.m_tab_content_start('normal', true) }}
      <!-- {{ macros.info_text_go('api_epg', 'EPG', value=arg['api_epg']) }} -->
      {{ macros.info_text_go('api_epgall', 'EPGALL', value=arg['api_epgall']) }}
      {{ macros.info_text_and_buttons('epg_updated_time', '', [['make_epg_btn', 'ë‹¤ì‹œ ë§Œë“¤ê¸°']], value='ë§Œë“  ì‹œê°„ : ' + arg['epg_updated_time'], desc=None) }}
      {{ macros.m_hr() }}

      {{ macros.setting_checkbox('block_wavve', 'WAVVE ìš”ì²­ ì°¨ë‹¨', value=arg['block_wavve'], 
      desc=[
      '- ì˜¤ë¼í´ í™˜ê²½ì—ì„œëŠ” ON', 
      '- ì˜¤ë¼í´ í™˜ê²½ì—ì„œ Proxy URLì„ ì„¤ì •í–ˆë‹¤ë©´ OFF', 
      'ğŸ“Œ WAVVE ê´€ë ¨ Proxy URL ì„¤ì •ì€ support_siteí”ŒëŸ¬ê·¸ì¸ì˜ WAVVE íƒ­ì—ì„œ ì„¤ì •'
      ]) }}
      {{ macros.m_hr() }}

      {{ macros.setting_checkbox('use_alive_m3u', 'ALive m3uall ì‚¬ìš©', value=arg['use_alive_m3u'], 
      desc=[
      'OFF : ì„ íƒí•œ ì œê³µìë¡œ epg ìƒì„± (ê¸°ì¡´ë°©ì‹)',
      'ON : ALive m3uallì˜ tvg-nameìœ¼ë¡œ epg ìƒì„±' 
      ]) }}
      {{ macros.setting_input_text('alive_m3uall_url', 'ALive m3uall url', value=arg['alive_m3uall_url']) }}
      {{ macros.m_hr() }}

      <div id="use_alive_m3u_div" class="collapse">
      {{ macros.setting_checkbox('KT', 'KT', value=arg['KT']) }}
      {{ macros.setting_checkbox('LG', 'LG', value=arg['LG']) }}
      {{ macros.setting_checkbox('SK', 'SK', value=arg['SK']) }}
      {{ macros.setting_checkbox('DAUM', 'DAUM', value=arg['DAUM']) }}
      {{ macros.setting_checkbox('NAVER', 'NAVER', value=arg['NAVER']) }}
      {{ macros.setting_checkbox('WAVVE', 'WAVVE', value=arg['WAVVE']) }}
      {{ macros.setting_checkbox('TVING', 'TVING', value=arg['TVING']) }}
      {{ macros.setting_checkbox('SPOTV', 'SPOTV', value=arg['SPOTV']) }}
      {{ macros.m_hr() }}
      </div>

      <!-- {{ macros.setting_checkbox('match_m3u_epg', 'm3u ì™€ epg ì±„ë„ ë§¤ì¹˜', value=arg['match_m3u_epg'], desc=['experimental']) }}
      {{ macros.m_hr() }} -->
      
      {{ macros.setting_buttons([['delete_setting_file_btn', 'ì‚­ì œ']], left='EPG2XML ì„¤ì • íŒŒì¼ ì‚­ì œ', desc=['file í´ë” ì‚­ì œ ( Channel.json / epg2xml.json / xmltv.xml )'] ) }}

    {{ macros.m_tab_content_end() }}  
    {{ macros.m_tab_content_start('auto', false) }}
      {{ macros.global_setting_scheduler_button(arg['is_include'], arg['is_running']) }}
      {{ macros.setting_input_text('main_interval', 'ìŠ¤ì¼€ì¥´ë§ ì‹¤í–‰ ì •ë³´', value=arg['main_interval'], col='3', desc=['Inverval(minute ë‹¨ìœ„)ì´ë‚˜ Cron ì„¤ì •']) }}
      {{ macros.setting_checkbox('main_auto_start', 'ì‹œì‘ì‹œ ìë™ì‹¤í–‰', value=arg['main_auto_start'], desc='On : ì‹œì‘ì‹œ ìë™ìœ¼ë¡œ ìŠ¤ì¼€ì¥´ëŸ¬ì— ë“±ë¡ë©ë‹ˆë‹¤.') }}
    {{ macros.m_tab_content_end() }}
</div>
</form>

<script type="text/javascript">


$(document).ready(function(){
  use_collapse("use_alive_m3u", reverse=true)
});


$('#use_alive_m3u').change(function() {use_collapse('use_alive_m3u', reverse=true);});


$("body").on('click', '#delete_setting_file_btn', function(e){
  e.preventDefault();
  globalSendCommand('delete_setting_file', null, null, null, function(ret){
    $('#epg_updated_time').html(`ë§Œë“  ì‹œê°„ : `);
  });
});


$("body").on('click', '#make_epg_btn', function(e){
  e.preventDefault();
  globalSendCommand('make_epg', null, null, null, function(ret){
    $('#epg_updated_time').html(`ë§Œë“  ì‹œê°„ : ${ret.updated_time}`);
  });
});
</script>
{% endblock %}